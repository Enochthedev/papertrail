@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 44 33% 97%;
    --foreground: 42 10% 21%;

    --card: 44 33% 97%;
    --card-foreground: 42 10% 21%;

    --popover: 44 33% 97%;
    --popover-foreground: 42 10% 21%;

    --primary: 25 45% 28%;
    --primary-foreground: 44 33% 97%;

    --secondary: 25 30% 50%;
    --secondary-foreground: 44 33% 97%;

    --muted: 42 15% 89%;
    --muted-foreground: 42 10% 40%;

    --accent: 42 20% 71%;
    --accent-foreground: 25 45% 28%;

    --destructive: 0 85% 60%;
    --destructive-foreground: 44 33% 97%;

    --border: 25 30% 83%;
    --input: 25 30% 83%;
    --ring: 25 45% 28%;

    --radius: 0.5rem;

    /* Custom Papertrail variables */
    --page-edge: 43 36% 74%;
    --link: 25 25% 37%;
    --highlight: 42 20% 71%;
  }

  .dark {
    --background: 0 0% 12%;
    --foreground: 0 0% 93%;

    --card: 0 0% 12%;
    --card-foreground: 0 0% 93%;

    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 93%;

    --primary: 25 45% 28%;
    --primary-foreground: 0 0% 93%;

    --secondary: 25 30% 50%;
    --secondary-foreground: 0 0% 93%;

    --muted: 0 0% 20%;
    --muted-foreground: 0 0% 70%;

    --accent: 42 20% 40%;
    --accent-foreground: 0 0% 93%;

    --destructive: 0 62% 30%;
    --destructive-foreground: 0 0% 93%;

    --border: 0 0% 25%;
    --input: 0 0% 25%;
    --ring: 25 30% 50%;

    /* Custom Papertrail variables */
    --page-edge: 43 20% 30%;
    --link: 25 25% 60%;
    --highlight: 42 15% 30%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground transition-colors duration-300;
  }

  /* Custom paper texture */
  .paper-texture {
    @apply bg-background transition-colors duration-300;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23755c48' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
  }

  .dark .paper-texture {
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23755c48' fill-opacity='0.02' fill-rule='evenodd'/%3E%3C/svg%3E");
  }

  /* Book typography */
  .book-content {
    @apply font-serif leading-relaxed transition-colors duration-300;
  }

  .book-content.sans {
    @apply font-sans;
  }

  .book-content h1 {
    @apply text-2xl sm:text-3xl font-bold mb-4 sm:mb-6 mt-6 sm:mt-8;
  }

  .book-content h2 {
    @apply text-xl sm:text-2xl font-bold mb-3 sm:mb-4 mt-5 sm:mt-6;
  }

  .book-content h3 {
    @apply text-lg sm:text-xl font-bold mb-2 sm:mb-3 mt-4 sm:mt-5;
  }

  .book-content p {
    @apply mb-4;
  }

  /* Fix the link styling by using regular CSS instead of @apply for complex cases */
  .book-content a {
    color: #755c48;
    text-decoration: underline;
    text-underline-offset: 2px;
    transition: color 0.2s ease;
  }

  .book-content a:hover {
    color: #5c4033;
  }

  .dark .book-content a {
    color: #a67b5b;
  }

  .dark .book-content a:hover {
    color: #c5bba4;
  }

  .book-content ul,
  .book-content ol {
    @apply mb-4 ml-6;
  }

  .book-content ul {
    @apply list-disc;
  }

  .book-content ol {
    @apply list-decimal;
  }

  .book-content li {
    @apply mb-1;
  }

  .book-content blockquote {
    @apply pl-4 my-4 italic;
    border-left: 4px solid #d2b48c;
  }

  .dark .book-content blockquote {
    border-left: 4px solid #755c48;
  }

  .book-content img {
    @apply max-w-full my-4 rounded-md;
  }

  .book-content pre {
    background-color: #f5efe0;
    @apply p-4 rounded-md overflow-x-auto my-4;
  }

  .dark .book-content pre {
    background-color: #2a2a2a;
  }

  .book-content code {
    background-color: #f5efe0;
    @apply px-1 py-0.5 rounded-sm font-mono text-sm;
  }

  .dark .book-content code {
    background-color: #2a2a2a;
  }

  /* Simple reader transitions */
  .reader-container {
    transition: opacity 0.2s ease-in-out;
  }

  /* Reader mode */
  html.reader-mode .navbar {
    @apply opacity-0 pointer-events-none;
    transition: opacity 0.3s ease;
  }

  html.reader-mode .navbar:hover {
    @apply opacity-100 pointer-events-auto;
  }

  /* Theme transition */
  .theme-transition {
    @apply transition-colors duration-300;
  }

  /* Improved touch targets for mobile */
  @media (max-width: 640px) {
    button,
    a {
      min-height: 44px;
      min-width: 44px;
    }

    input,
    select,
    textarea {
      min-height: 44px;
    }

    .book-content {
      @apply text-base;
    }
  }

  /* Improved focus styles for accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }

  /* Improved scrollbars */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground;
  }

  /* Safe area insets for modern mobile devices */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}
